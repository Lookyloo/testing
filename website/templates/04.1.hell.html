<html>
<head>
  <meta charset="utf-8" />
</head>
<body>
  <center>
    <p>You've been tricked, and there is nothing you can do about it....</p>
    <img src="{{ url_for('static', filename='mouhahah.gif') }}"/>
  </center>

  <script type="text/javascript">
    (function (d, w, h) {
      var reverseUrl = '?try_go_back=1';
      h.pushState(null, 'Nice try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
      h.pushState(null, 'Nide try', reverseUrl);
    })(document, window, history);
  </script>

  <form action="/history_pushstate" method="get" id="submit-form">
    <input type="hidden" name="shu" value="0790e429e291f5064755f7fb0fb7254b85bdbb1697c4830cacd32b3a98ce667d7dbc02e5f2d1c6acb3756a9edce4c14a7ba2bdbbed6e8c3d981a16ead33fd320cd2e7b12dafeb71ffd5cf967df4c6f6bb23b506d"/>
    <input type="hidden" name="pst" value="1607642134"/>
    <input type="hidden" name="rmtc" value="t"/>
    <input type="hidden" name="uuid" value=""/>
    <input type="hidden" name="pii" value=""/>
    <input type="hidden" name="in" value=""/>
    <input type="hidden" name="key" value="7a7c3779889805e2058addecb7e13424"/>
    <input type="hidden" name="refer" value="https://www.circl.lu"/>
    <input type="hidden" name="psid" value="15398866"/>
  </form>
  <script type="text/javascript">
    try {
      if (window.opener !=null){
        if (window.opener.opener !=null){
          window.opener.opener = null;
        }
        window.opener = null;
      }
      if (parent.window.opener != null){
        parent.window.opener = null;
      }
    } catch(_e){}

    function now() {
      try {
        return Date.now();
      } catch (ex) {
        return (new Date()).getTime();
      }
    }

    function set(name, value) {
      document.forms[ 0 ][ "" + name ].value = value;
    }

    function submit(incognito) {
      set("in", incognito);
      document.forms[0].submit();
    }

    function redirect() {
      setTimeout(function() {submit("false");}, 5000);
    }

    var date = new Date(now() + 15 * 1000),
        cookies = document.cookie,
        start = cookies.indexOf("uid_id2="),
        isPopunder = true;

    document.cookie = "cjs=t; path=/; expires=" + date.toUTCString();
    isPopunder && window !== top && set("pii", "true");

    if (start === 0 || (start > 0 && (cookies.charAt(start - 1) === ';' || cookies.charAt(start - 1) === ' '))) {
      var finish = cookies.indexOf(';', start);
      set("uuid", cookies.substring(start + 8, finish === -1 ? void 0 : finish));
      redirect();
    } else {
      try {
        var request = new XMLHttpRequest(),
            timeout = setTimeout(function() {request.abort();}, 5000);
        request.withCredentials = true;
        request.open("GET", "//" + location.host + "/stats");

        request.onload = function() {
          // clearTimeout(timeout);
          set("uuid", request.responseText);
          document.cookie = "tracking_uuid=" + request.responseText + "; path=/; expires=" + date.toUTCString();
          redirect();
        };
        request.onerror = request.onabort = redirect;
        request.send();
      } catch (error) {
        redirect();
      }
    }
  </script>
</body></html>
